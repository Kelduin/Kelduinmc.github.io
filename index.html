<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Our Watchlist Premium</title>
    <style>
        /* --- CSS RESET & VARIABLES --- */
        :root {
            --bg-color: #000000;
            --card-bg: #141414;
            --text-color: #ffffff;
            --accent: #e50914;
            --gold: #ffd700;
            --row-height: 280px;
            --card-width: 160px;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            padding-bottom: 80px; /* Space for bottom scroll */
            overflow-x: hidden;
        }

        /* --- HEADER --- */
        header {
            padding: 20px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%);
            position: sticky;
            top: 0;
            z-index: 50;
        }

        h1 {
            margin: 0;
            font-size: 1.8rem;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
            text-align: center;
        }

        /* --- CONTROLS --- */
        .controls {
            padding: 0 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
        }

        .btn-roulette {
            background: linear-gradient(135deg, #e50914, #b20710);
            border: none;
            color: white;
            padding: 12px 40px;
            font-size: 1rem;
            font-weight: bold;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(229, 9, 20, 0.4);
            transition: transform 0.2s;
            cursor: pointer;
        }
        .btn-roulette:active { transform: scale(0.95); }

        .filter-scroll {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            width: 100%;
            padding-bottom: 10px;
            /* Hide Scrollbar */
            scrollbar-width: none; 
            -ms-overflow-style: none;
        }
        .filter-scroll::-webkit-scrollbar { display: none; }

        .chip {
            background: #333;
            color: #ccc;
            border: 1px solid #555;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s;
        }
        .chip.active {
            background: white;
            color: black;
            border-color: white;
            font-weight: bold;
        }

        select {
            background: #222;
            color: white;
            border: 1px solid #444;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.9rem;
            outline: none;
        }

        /* --- LAYOUTS (Row vs Grid) --- */
        
        /* 1. HORIZONTAL ROWS (Netflix Style) */
        .section-title {
            padding: 0 20px;
            font-size: 1.1rem;
            font-weight: 700;
            margin-top: 10px;
            margin-bottom: 10px;
            color: #e5e5e5;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .row-container {
            display: flex;
            overflow-x: auto;
            gap: 12px;
            padding: 0 20px 20px 20px; /* Bottom padding for shadow */
            scroll-snap-type: x mandatory; /* The "Snap" feel */
            scroll-behavior: smooth;
            /* Hide Scrollbar */
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .row-container::-webkit-scrollbar { display: none; }

        /* 2. GRID (For Filters) */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
        }

        /* --- CARD DESIGN --- */
        .card {
            flex: 0 0 var(--card-width); /* Fixed width for rows */
            aspect-ratio: 2 / 3;
            background-color: #222;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
            scroll-snap-align: start; /* Snap alignment */
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .card:active { transform: scale(0.97); }

        .card-image {
            width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
        }

        .card-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,1) 0%, rgba(0,0,0,0.4) 50%, transparent 100%);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 10px;
        }

        .card-cat-badge {
            font-size: 0.6rem;
            font-weight: 800;
            letter-spacing: 1px;
            color: #aaa;
            text-transform: uppercase;
            margin-bottom: 2px;
        }

        .card-title {
            font-size: 0.9rem;
            font-weight: 700;
            line-height: 1.2;
            color: white;
            margin-bottom: 4px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.9);
        }

        .card-status {
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-dot { width: 6px; height: 6px; border-radius: 50%; }
        
        /* Status Colors */
        .s-new { color: #46d369; } .d-new { background: #46d369; }
        .s-paused { color: #ffa00a; } .d-paused { background: #ffa00a; }
        .s-me { color: #a55eea; } .d-me { background: #a55eea; }
        .s-her { color: #fd79a8; } .d-her { background: #fd79a8; }
        .s-done { color: #777; } .d-done { background: #777; }

        /* --- MODAL --- */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9);
            z-index: 100; display: none; align-items: center; justify-content: center;
            backdrop-filter: blur(10px); padding: 20px;
        }

        .info-card {
            background: #1a1a1a; width: 100%; max-width: 450px;
            border-radius: 12px; overflow: hidden; border: 1px solid #333;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            max-height: 90vh; overflow-y: auto;
        }

        .info-hero { height: 220px; background-size: cover; background-position: center; position: relative; }
        .info-hero::after { content:''; position:absolute; inset:0; background: linear-gradient(to top, #1a1a1a, transparent); }
        
        .info-body { padding: 20px; }
        .info-title { font-size: 1.8rem; font-weight: 800; line-height: 1.1; margin-bottom: 10px; }
        .info-tags { display: flex; gap: 10px; margin-bottom: 15px; font-size: 0.85rem; color: #ccc; }
        .info-desc { color: #bbb; font-size: 0.95rem; line-height: 1.5; margin-bottom: 20px; }
        .info-note { background: #252525; padding: 15px; border-left: 3px solid var(--accent); border-radius: 4px; font-style: italic; color: #ddd; font-size: 0.9rem;}
        
        .close-btn { 
            width: 100%; padding: 15px; background: #333; border: none; 
            color: white; font-weight: bold; cursor: pointer; text-transform: uppercase; letter-spacing: 1px;
        }

        /* --- ROULETTE --- */
        .roulette-wrapper { width: 100%; overflow: hidden; position: relative; height: 220px; border: 2px solid #333; border-radius: 8px; background: #000; }
        .roulette-track { display: flex; height: 100%; position: absolute; left: 0; }
        .r-card { width: 140px; height: 100%; background-size: cover; border-right: 1px solid #111; flex-shrink: 0; }
        .r-line { position: absolute; left: 50%; top: 0; bottom: 0; width: 4px; background: var(--gold); transform: translateX(-50%); z-index: 10; box-shadow: 0 0 15px var(--gold); }

    </style>
</head>
<body>

    <header>
        <h1>Our List</h1>
    </header>

    <div class="controls">
        <button class="btn-roulette" onclick="startRoulette()">üé≤ Spin & Pick</button>
        
        <div class="filter-scroll">
            <div class="chip active" onclick="setFilter('all', this)">Home</div>
            <div class="chip" onclick="setFilter('ANIME', this)">Anime</div>
            <div class="chip" onclick="setFilter('MOVIE', this)">Movies</div>
            <div class="chip" onclick="setFilter('SHOW', this)">Shows</div>
            <div class="chip" onclick="setFilter('YOUTUBE', this)">YouTube</div>
        </div>

        <div style="display: flex; gap: 10px; width: 100%;">
            <select id="statusFilter" onchange="updateUI()" style="flex:1;">
                <option value="all">Status: All</option>
                <option value="new">‚ú® New</option>
                <option value="paused">‚è≥ Paused</option>
                <option value="me">üë§ Me</option>
                <option value="her">üíï Her</option>
            </select>
            <select id="sortOrder" onchange="updateUI()" style="flex:1;">
                <option value="default">Default</option>
                <option value="imdb">Rating</option>
                <option value="az">A-Z</option>
            </select>
        </div>
    </div>

    <div id="mainContent"></div>

    <div class="modal-overlay" id="infoModal" onclick="closeModal(event)">
        <div class="info-card">
            <div class="info-hero" id="mHero"></div>
            <div class="info-body">
                <div class="info-title" id="mTitle"></div>
                <div class="info-tags" id="mTags"></div>
                <div class="info-desc" id="mDesc"></div>
                <div id="mNoteBox" style="display:none;"><div class="info-note" id="mNote"></div></div>
            </div>
            <button class="close-btn" onclick="closeModal(null)">Close</button>
        </div>
    </div>

    <div class="modal-overlay" id="rouletteModal">
        <div style="width: 100%; max-width: 600px; text-align: center;">
            <h2 style="color: var(--gold); margin-bottom: 15px; text-transform: uppercase;">Spinning...</h2>
            <div class="roulette-wrapper">
                <div class="r-line"></div>
                <div class="roulette-track" id="rTrack"></div>
            </div>
            <h1 id="rWinner" style="color: white; margin-top: 20px; opacity: 0; transition: opacity 0.5s;">???</h1>
            <button class="close-btn" style="margin-top: 20px; border-radius: 30px;" onclick="document.getElementById('rouletteModal').style.display='none'">Close</button>
        </div>
    </div>

    <script>
        // --- DATA ---
        const mediaList = [
             // ANIME
            { category: "ANIME", title: "Frieren", me: false, her: false, imdb: 8.9, image: "https://m.media-amazon.com/images/M/MV5BMzRjZWVmMzItNTdmYi00YWZhLTweZGEtMjMzM2FlNmU5ZWE4XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "An elf mage sets out on a journey to understand humanity after the death of her former comrade.", note: "" },
            { category: "ANIME", title: "Attack on Titan", me: true, her: "50/50", imdb: 9.1, image: "https://m.media-amazon.com/images/M/MV5BNzc5MTczNDQtNDFjNi00ZDU5LWFkNzItOTE1NzQzMzdhNzMxXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Young Eren Yeager vows to cleanse the earth of the giant humanoid Titans.", note: "sky watched s1 but doesnt remember anything" },
            { category: "ANIME", title: "Delicious in Dungeon", me: false, her: false, imdb: 8.4, image: "https://m.media-amazon.com/images/M/MV5BODQ0ODAxYTEtNzdmMC00M2I4LWI2NzUtYzFjM2YyYWM2YWE1XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "An adventurer and his party save money by cooking the monsters they find in the dungeon.", note: "" },
            { category: "ANIME", title: "Kaiju no 8 s2", me: false, her: false, imdb: 8.4, image: "https://m.media-amazon.com/images/M/MV5BMjY5OTQ0Y2ItMzE0MC00Yzk4LWIxNzItODc1ZGE0OWFkODU4XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "A sweeper gets infected by a parasitic Kaiju and gains the power to turn into one.", note: "we both saw season1" },
            { category: "ANIME", title: "Crunchyroll Backlog", me: false, her: false, imdb: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Crunchyroll_Logo.png/640px-Crunchyroll_Logo.png", desc: "Various unwatched anime series sitting in the queue.", note: "Other Animes on my crunchy" },
            { category: "ANIME", title: "One Piece Movies", me: "50/50", her: "50/50", imdb: 7.5, image: "https://m.media-amazon.com/images/M/MV5BODcwNWE3OTMtMDc3MS00NDFjLWE1MDAtNDA0Y2JjMGNiMDZiXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Films: Baron Omatsuri, Film Z, Stampede, Gold, and Red.", note: "Baron-Z-Stampede-Gold-Red" },
            { category: "ANIME", title: "Dr. Stone", me: false, her: false, imdb: 8.1, image: "https://m.media-amazon.com/images/M/MV5BN2IzY2RlZDYtMTQxZi00ZmFmLTgzOWEtYjNjY2UxNTNmYjFjXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "A genius boy awakens thousands of years in the future to rebuild civilization with science.", note: "cool anime about rebuilding the world" },
            { category: "ANIME", title: "Re:Zero", me: "50/50", her: "50/50", imdb: 8.0, image: "https://m.media-amazon.com/images/M/MV5BN2NlM2Y5Y2MtYjU5Min00M2M4LWE2YGYtYjA2ODNiYDY4NWJhXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Subaru Natsuki is transported to another world where he can rewind time by dying.", note: "finished season 1" },

            // MOVIES
            { category: "MOVIE", title: "Lord Of The Rings", me: true, her: false, imdb: 8.9, image: "https://m.media-amazon.com/images/M/MV5BNzIxMDQ2YTItNDM4Ny00NDc3LWE0ODItODQ4NmJkNDMwYjRjXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "A Hobbit and companions set out to destroy the One Ring.", note: "" },
            { category: "MOVIE", title: "The Hobbit", me: true, her: false, imdb: 7.8, image: "https://m.media-amazon.com/images/M/MV5BODIyOTEyMzY3NV5BMl5BanBnXkFtZTcwZjQ5NDc2OA@@._V1_FMjpg_UX1000_.jpg", desc: "Bilbo Baggins sets out to reclaim the Lonely Mountain.", note: "" },
            { category: "MOVIE", title: "Narnia", me: true, her: false, imdb: 6.9, image: "https://m.media-amazon.com/images/M/MV5BMTc0NTUwMTU5OV5BMl5BanBnXkFtZTcwNjAwNzQzMw@@._V1_FMjpg_UX1000_.jpg", desc: "Four kids travel through a wardrobe to the land of Narnia.", note: "watched only 1st movie" },
            { category: "MOVIE", title: "Harry Potter", me: "50/50", her: true, imdb: 7.6, image: "https://m.media-amazon.com/images/M/MV5BNmQ0ODBhMjUtNDRhOC00MGQzLTk5YWQtNDQwMzQxNTRiM2Q1XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "An orphaned boy enrolls in a school of wizardry.", note: "i dont remember much" },
            { category: "MOVIE", title: "Sinners", me: false, her: false, imdb: 0, image: "https://m.media-amazon.com/images/M/MV5BYzA2NzY2M2QtNTdkMi00NDM4LWIwNGUtZTM0ZWE0NWI1MmM4XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Upcoming Ryan Coogler horror movie.", note: "Upcoming movie?" },
            { category: "MOVIE", title: "Boss Level", me: true, her: false, imdb: 6.8, image: "https://m.media-amazon.com/images/M/MV5BNkVkZTY0MzMtYzE0YS00NzkzLTk2MjktOTVhOTM2NzE2YzRiXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Trapped in a time loop repeating the day of his murder.", note: "" },
            { category: "MOVIE", title: "IT Movies", me: false, her: false, imdb: 7.3, image: "https://m.media-amazon.com/images/M/MV5BZDVkZmI0YzAtNzdjYi00ZjhhLWE1ODEtMWMzMWMzNDA0NmQ4XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Kids band together to destroy a shape-shifting monster clown.", note: "" },
            { category: "MOVIE", title: "The King", me: false, her: false, imdb: 7.3, image: "https://m.media-amazon.com/images/M/MV5BN2E2ZjdiZjktZTZkNi00YTNiLTk0YmQtYTgyMjMzYjExMjE1XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Young Henry V encounters deceit and war after becoming King.", note: "" },
            { category: "MOVIE", title: "Hereditary", me: false, her: false, imdb: 7.3, image: "https://m.media-amazon.com/images/M/MV5BOTU5MDg3OGItZWQ1Ny00ZTZlLTE4YzktNTY2NDRmFDY0OTBmXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "A grieving family is haunted by tragic occurrences.", note: "" },
            { category: "MOVIE", title: "Uncharted", me: true, her: false, imdb: 6.3, image: "https://m.media-amazon.com/images/M/MV5BMWEwNjhkYzYtNjgzZi00YTY3LThjYWYtYzM2OWJlYWU1MGY2XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Nathan Drake is recruited by Sully to recover a fortune.", note: "" },
            { category: "MOVIE", title: "World War Z", me: true, her: false, imdb: 7.0, image: "https://m.media-amazon.com/images/M/MV5BNDQ4YzFmNzktMmM5ZC00MDZjLTk1OTktNDE2ODE4YjM2MjJjXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "A race against time to stop a zombie pandemic.", note: "" },
            { category: "MOVIE", title: "Django Unchained", me: true, her: false, imdb: 8.5, image: "https://m.media-amazon.com/images/M/MV5BMjIyNTQ5NjQ1OV5BMl5BanBnXkFtZTcwODg1MDU4OA@@._V1_FMjpg_UX1000_.jpg", desc: "A freed slave sets out to rescue his wife from a plantation owner.", note: "" },
            { category: "MOVIE", title: "Bullet Train", me: false, her: false, imdb: 7.3, image: "https://m.media-amazon.com/images/M/MV5BMDU2ZmM2OTYtNzIxYy00NjM5LTliNGQtN2JmOWQzYTBmZWUzXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Five assassins aboard a bullet train find their missions connected.", note: "" },
            { category: "MOVIE", title: "Magnificent Seven", me: true, her: false, imdb: 6.9, image: "https://m.media-amazon.com/images/M/MV5BMTUyNzQ2NDI5MV5BMl5BanBnXkFtZTgwNjM4ODQ5OTE@._V1_FMjpg_UX1000_.jpg", desc: "Seven gunmen protect a town from a private army.", note: "" },
            { category: "MOVIE", title: "The Gentlemen", me: true, her: false, imdb: 7.8, image: "https://m.media-amazon.com/images/M/MV5BODNmYTkxZmUtYzJmZi00YmQ4LTgyYmYtYjA4ZjYxY2YyZDA3XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "An American expat tries to sell off his marijuana empire in London.", note: "" },
            { category: "MOVIE", title: "Snatch", me: true, her: false, imdb: 8.2, image: "https://m.media-amazon.com/images/M/MV5BMTA2NDYxOGYtYjU1Mi00Y2QzLTgxMTQtMWI1MGI0ZGQ5MmU4XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Promoters, bookmakers, and gangsters fight to track down a diamond.", note: "" },
            { category: "MOVIE", title: "Planet of the Apes", me: true, her: false, imdb: 7.6, image: "https://m.media-amazon.com/images/M/MV5BMTY0MTIxNDU4M15BMl5BanBnXkFtZTcwNzU3ODUyMw@@._V1_FMjpg_UX1000_.jpg", desc: "An astronaut crash-lands on a planet dominated by apes.", note: "" },
            { category: "MOVIE", title: "Indiana Jones", me: "50/50", her: false, imdb: 8.2, image: "https://m.media-amazon.com/images/M/MV5BNDE1NDExMTItNDg5MC00MThhLWJhY2MtMzQ5NDVkNTkzYTNhXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Indiana Jones races Nazis to find the Ark of the Covenant.", note: "" },
            { category: "MOVIE", title: "Garfield", me: false, her: false, imdb: 5.7, image: "https://m.media-amazon.com/images/M/MV5BNTI2YTI0MWEtNGQ4OS00ODIzLWE1MWEtZGJiN2E3ZDM1YzJlXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Garfield is about to have a wild outdoor adventure.", note: "" },
            { category: "MOVIE", title: "Interstellar", me: true, her: false, imdb: 8.7, image: "https://m.media-amazon.com/images/M/MV5BYzdjMDAxZGItMjI2My00ODA1LTlkNzItOWFjMDU5ZDJlYWM3XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Explorers travel through a wormhole to ensure humanity's survival.", note: "" },

            // SHOWS
            { category: "SHOW", title: "Star Wars (Shows)", me: "50/50", her: "50/50", imdb: 8.6, image: "https://m.media-amazon.com/images/M/MV5BN2IyYzJiMGEtYTZiYi00ZDUxLTkyM2ItMjA1NzU0NWM0ZWJjXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Mandalorian, Andor, Ahsoka and more.", note: "GUIDE STAR WARS, we not done yet" },
            { category: "SHOW", title: "From", me: "50/50", her: "50/50", imdb: 7.8, image: "https://m.media-amazon.com/images/M/MV5BNDUyNWEwODktMmJlMy00OGNiLTk0MGEtNjQ2ZmJkZGE4ZWIyXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "A nightmarish town traps all those who enter.", note: "we both stopped mid season 1" },
            { category: "SHOW", title: "Severance", me: "50/50", her: false, imdb: 8.7, image: "https://m.media-amazon.com/images/M/MV5BODQ0ODAxYTEtNzdmMC00M2I4LWI2NzUtYzFjM2YyYWM2YWE1XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Workers' memories are surgically divided between work and life.", note: "i didnt finish" },
            { category: "SHOW", title: "Weak Hero", me: "50/50", her: false, imdb: 8.5, image: "https://m.media-amazon.com/images/M/MV5BMjA3Y2YyOWItYjc5Mi00YmU3LWJhNDctM2RiYzdlZDQyMjY2XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "A model student uses his intelligence to fight violence.", note: "i didnt finish" },
            { category: "SHOW", title: "Fallout", me: false, her: false, imdb: 8.4, image: "https://m.media-amazon.com/images/M/MV5MmVhNGEwZDYtZTMzOS00YzU5LWE4ZjItMGQ1ZmU0MzZmYzUyXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Citizens live in bunkers to protect themselves in a post-apocalyptic LA.", note: "too much gore but we can try" },
            { category: "SHOW", title: "Dexter", me: false, her: false, imdb: 8.6, image: "https://m.media-amazon.com/images/M/MV5BMTM5MjkwMTI0MV5BMl5BanBnXkFtZTcwODQwMTc0Mg@@._V1_FMjpg_UX1000_.jpg", desc: "A forensic technician leads a double life as a serial killer.", note: "" },
            { category: "SHOW", title: "Game Of Thrones", me: "50/50", her: false, imdb: 9.2, image: "https://m.media-amazon.com/images/M/MV5BN2IzYzBiOTQtNGZmMi00NDI5LTgxMzMtN2EzZjA1NjhlOGMxXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Nine noble families fight for control over Westeros.", note: "I stopped at season 6, alot of nudity" },
            { category: "SHOW", title: "Lucifer", me: true, her: false, imdb: 8.1, image: "https://m.media-amazon.com/images/M/MV5BNDJjMzc4NGYtZmFmNS00YWY3LThjMzItYjZjZjNhNDVmYjY5XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "The Devil decides to spend some time on Earth.", note: "" },
            { category: "SHOW", title: "Upload", me: false, her: false, imdb: 7.9, image: "https://m.media-amazon.com/images/M/MV5BNDJlMjAyYjItYzRhOS00NzVhLTg2YjYtYWIzNjE2Y2RlY2YxXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Consciousness can be uploaded into a virtual afterlife.", note: "" },
            { category: "SHOW", title: "Lego Ninjago", me: true, her: false, imdb: 7.0, image: "https://m.media-amazon.com/images/M/MV5BNzQ3OTY0OTQtMzY2Yy00ODFkLTgwYmEtZDRmYjBiYzE2YmVkXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Six young ninjas defend their island home.", note: "" },
            { category: "SHOW", title: "Happiness", me: false, her: false, imdb: 8.2, image: "https://m.media-amazon.com/images/M/MV5BMjY2ZmMxNDYtODk3ZC00YzllLTk1OTQtYzY1MzNhNzZkNmIyXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "An apocalyptic thriller about infectious diseases.", note: "" },
            { category: "SHOW", title: "Dark", me: false, her: false, imdb: 8.7, image: "https://m.media-amazon.com/images/M/MV5BMzY1ODIzMDItMjg5OS00NTUzLThlNmItZTQyNDFjODMzMjY2XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "A family saga with a supernatural twist and time travel.", note: "" },
            { category: "SHOW", title: "The Strain", me: false, her: false, imdb: 7.3, image: "https://m.media-amazon.com/images/M/MV5BMjA5ODk4Njg2OV5BMl5BanBnXkFtZTgwNTc4MzMwMjE@._V1_FMjpg_UX1000_.jpg", desc: "A viral outbreak of ancient vampirism ravages New York.", note: "" },
            { category: "SHOW", title: "Peaky Blinders", me: false, her: false, imdb: 8.8, image: "https://m.media-amazon.com/images/M/MV5BZjYzZDgzMDktMmU0NC00ZmI5LWJhZGYtZTRiYWNlNDY5NTA1XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "A gangster family epic set in 1900s England.", note: "" },
            { category: "SHOW", title: "The Last of Us", me: "50/50", her: false, imdb: 8.7, image: "https://m.media-amazon.com/images/M/MV5BZGUzYTI3M2EtZmM0Yy00NGUyLWI4ODEtN2Q3ZGJlYzhhZjU3XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "A survivor takes charge of a girl who may be humanity's last hope.", note: "" },
            { category: "SHOW", title: "Snowpiercer", me: false, her: false, imdb: 6.9, image: "https://m.media-amazon.com/images/M/MV5BYzZkMTkyYmQtNzYxMi00M2VhLWE2YzktMzhhNWY2NjBjNzA5XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg", desc: "Life on a massive, perpetually-moving train in a frozen world.", note: "" },

            // YOUTUBE
            { category: "YOUTUBE", title: "Oliver Supercut", me: true, her: false, imdb: 0, image: "https://i.ytimg.com/vi/aL3sIk23XqE/hqdefault.jpg", desc: "Compilation of funny moments from John Oliver.", note: "John Oliver?" },
            { category: "YOUTUBE", title: "Ludwig Japan Trip", me: true, her: "50/50", imdb: 0, image: "https://i.ytimg.com/vi/q1R2_K_Xq1U/hqdefault.jpg", desc: "Ludwig's vlog adventures in Japan.", note: "stopped on like ep3" },
            { category: "YOUTUBE", title: "Ryan 50 State Trip", me: "50/50", her: "50/50", imdb: 0, image: "https://i.ytimg.com/vi/c0d7gR_d-iU/hqdefault.jpg", desc: "Ryan Trahan crosses America to deliver a penny.", note: "stopped on like ep.16?" }
        ];

        let currentCategory = 'all';

        // --- CORE LOGIC ---
        function getStatusInfo(me, her) {
            if (me === false && her === false) return { text: "New", class: "s-new", dot: "d-new", code: "new" };
            if (me === true && her === true) return { text: "Done", class: "s-done", dot: "d-done", code: "done" };
            if ((me === "50/50" && her === "50/50") || (me === "50/50" && her === false) || (me === false && her === "50/50")) 
                return { text: "Paused", class: "s-paused", dot: "d-paused", code: "paused" };
            if (me === true && her === false) return { text: "Only Me", class: "s-me", dot: "d-me", code: "me" };
            if (me === false && her === true) return { text: "Only Her", class: "s-her", dot: "d-her", code: "her" };
            return { text: "Plan", class: "", dot: "", code: "other" };
        }

        function setFilter(cat, btn) {
            currentCategory = cat;
            document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            btn.classList.add('active');
            updateUI();
        }

        // --- RENDERING ---
        function updateUI() {
            const main = document.getElementById('mainContent');
            const statusFilter = document.getElementById('statusFilter').value;
            const sortOrder = document.getElementById('sortOrder').value;

            main.innerHTML = "";

            // 1. FILTER ITEMS
            let filtered = mediaList.filter(item => {
                const s = getStatusInfo(item.me, item.her);
                if (statusFilter !== 'all' && s.code !== statusFilter) return false;
                if (currentCategory !== 'all' && !item.category.includes(currentCategory)) return false;
                return true;
            });

            // 2. SORT
            if (sortOrder === 'imdb') {
                filtered.sort((a, b) => (b.imdb || 0) - (a.imdb || 0));
            } else if (sortOrder === 'az') {
                filtered.sort((a, b) => a.title.localeCompare(b.title));
            }

            // 3. DECIDE LAYOUT: Rows or Grid?
            // If "All" category AND "All" status -> Show Rows (Home View)
            // Else -> Show Grid (Search Results View)
            
            if (currentCategory === 'all' && statusFilter === 'all' && sortOrder === 'default') {
                // RENDER ROWS (Netflix Style)
                const categories = ["ANIME", "MOVIE", "SHOW", "YOUTUBE"];
                categories.forEach(cat => {
                    const rowItems = filtered.filter(i => i.category.includes(cat));
                    if (rowItems.length > 0) {
                        // Title
                        const title = document.createElement('div');
                        title.className = 'section-title';
                        title.innerText = cat + 's';
                        main.appendChild(title);

                        // Scroll Container
                        const row = document.createElement('div');
                        row.className = 'row-container';
                        
                        rowItems.forEach(item => row.appendChild(createCard(item)));
                        main.appendChild(row);
                    }
                });
            } else {
                // RENDER GRID
                const grid = document.createElement('div');
                grid.className = 'grid-container';
                filtered.forEach(item => grid.appendChild(createCard(item)));
                main.appendChild(grid);
                
                if (filtered.length === 0) {
                    main.innerHTML = "<div style='text-align:center; padding:50px; color:#555;'>Nothing found üòî</div>";
                }
            }
        }

        function createCard(item) {
            const el = document.createElement('div');
            el.className = 'card';
            el.onclick = () => openModal(item);
            
            const s = getStatusInfo(item.me, item.her);
            
            el.innerHTML = `
                <div class="card-image" style="background-image: url('${item.image}')"></div>
                <div class="card-overlay">
                    <div class="card-cat-badge">${item.category}</div>
                    <div class="card-title">${item.title}</div>
                    <div class="card-status">
                        <span class="status-dot ${s.dot}"></span>
                        <span class="${s.class}">${s.text}</span>
                    </div>
                </div>
            `;
            return el;
        }

        // --- MODAL ---
        function openModal(item) {
            const s = getStatusInfo(item.me, item.her);
            document.getElementById('mHero').style.backgroundImage = `url('${item.image}')`;
            document.getElementById('mTitle').innerText = item.title;
            document.getElementById('mTags').innerHTML = `
                <span class="${s.class}" style="font-weight:bold;">${s.text}</span> ‚Ä¢ 
                ${item.category} ‚Ä¢ 
                ${item.imdb > 0 ? `‚≠ê ${item.imdb}` : ''}
            `;
            document.getElementById('mDesc').innerText = item.desc;
            
            if (item.note) {
                document.getElementById('mNoteBox').style.display = 'block';
                document.getElementById('mNote').innerText = item.note;
            } else {
                document.getElementById('mNoteBox').style.display = 'none';
            }
            
            document.getElementById('infoModal').style.display = 'flex';
        }

        function closeModal(e) {
            if (!e || e.target.id === 'infoModal') {
                document.getElementById('infoModal').style.display = 'none';
            }
        }

        // --- ROULETTE ---
        function startRoulette() {
            const candidates = mediaList.filter(i => {
                const c = getStatusInfo(i.me, i.her).code;
                return c === 'new' || c === 'paused';
            });

            if (candidates.length === 0) { alert("Nothing to watch!"); return; }

            document.getElementById('rouletteModal').style.display = 'flex';
            document.getElementById('rWinner').style.opacity = '0';
            
            const track = document.getElementById('rTrack');
            track.innerHTML = "";
            track.style.transition = 'none';
            track.style.transform = 'translateX(0)';
            
            const total = 50;
            const winIdx = 40;
            const winner = candidates[Math.floor(Math.random() * candidates.length)];
            
            for(let i=0; i<total; i++) {
                const it = (i===winIdx) ? winner : candidates[Math.floor(Math.random() * candidates.length)];
                const d = document.createElement('div');
                d.className = 'r-card';
                d.style.backgroundImage = `url('${it.image}')`;
                track.appendChild(d);
            }

            // Animate
            setTimeout(() => {
                const cardW = 140;
                const offset = -((winIdx * cardW) + (cardW/2) - (track.parentElement.offsetWidth / 2));
                const jitter = Math.floor(Math.random()*20) - 10;
                
                track.style.transition = 'transform 4.5s cubic-bezier(0.1, 0, 0.2, 1)';
                track.style.transform = `translateX(${offset + jitter}px)`;
                
                setTimeout(() => {
                    const wTitle = document.getElementById('rWinner');
                    wTitle.innerText = winner.title;
                    wTitle.style.opacity = '1';
                }, 4500);
            }, 50);
        }

        // Init
        updateUI();

    </script>
</body>
</html>
